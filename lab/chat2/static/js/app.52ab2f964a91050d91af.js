webpackJsonp([1,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var s=n(10),o=i(s),a=n(95),r=i(a),u=n(97),l=i(u),d=n(1),c=i(d);n(73),n(74),n(75),n(64);var f=n(79),p=i(f),h=n(24),m=i(h);o.default.use(r.default),o.default.use(l.default);var _=new l.default({routes:m.default});window.wilddog.auth().onAuthStateChanged(function(t){t&&c.default.setCurrentUser(t),new o.default({el:"#app",render:function(t){return t(p.default)},router:_});var e=_.currentRoute;!t||e&&e.meta.requireAuth?t||e&&!e.meta.requireAuth||_.replace({path:"/login",query:{redirect:e.fullPath}}):_.replace(e.query.redirect||"/")})},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(11),o=i(s),a=void 0,r={},u={register:function(t,e){return o.default.auth().createUserWithEmailAndPassword(t,e)},login:function(t,e){return o.default.auth().signInWithEmailAndPassword(t,e)},signOut:function(){return o.default.auth().signOut()},setCurrentUser:function(t){r=t},getCurrentUser:function(){return r},authorized:function(){return!!this.getCurrentUser()},updateUserInfo:function(t){return o.default.auth().currentUser.updateProfile(t)},instance:function(){return a||(a=o.default.auth()),a}};e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),o=i(s),a=n(22),r=i(a),u=n(10),l=i(u),d=n(96),c=i(d),f=l.default.extend(r.default),p=null,h=function(t){var e=(0,o.default)({title:"提示",btnText:{OK:"确认",Cancel:"取消"},textCenter:!0,cancelable:!0},t);return p||(p=new f({el:window.document.createElement("div")}),window.document.body.appendChild(p.$el)),p.show(e)};e.default={toast:function(t){return(0,c.default)(t)},info:function(t){var e=t;return"string"==typeof t&&(e={title:"提示",content:t,cancelable:!1}),h(e)},confirm:function(t){var e=t;return"string"==typeof t&&(e={title:"确认",content:t}),h(e)}}},,,,,,,,function(t,e){t.exports=Vue},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=window.wilddog.initializeApp({authDomain:"chat2.wilddog.com",syncURL:"https://chat2.wilddogio.com"},"DEFAULT");e.default=n},,,,,,,,function(t,e){},function(t,e,n){t.exports=n.p+"static/img/anonymous.097d2c2.png"},function(t,e,n){t.exports=n.p+"static/img/logo.b2a99cc.png"},function(t,e,n){var i,s;i=n(28);var o=n(90);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;n(72),i=n(34);var o=n(93);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),o=i(s),a=n(85),r=i(a),u=n(84),l=i(u),d=[{path:"/",name:"index",component:l.default,meta:{requireAuth:!0}},{path:"/login",name:"login",component:o.default},{path:"/register",name:"register",component:r.default}];e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(11),o=i(s),a=n(1),r=i(a),u=o.default.sync(),l=u.ref("messages"),d={send:function(t){var e=r.default.getCurrentUser(),n={uid:e.uid,content:t,time:Date.now(),name:e.displayName||e.email,photo:e.photoURL};l.push(n)},onMessage:function(t){l.on("child_added",function(e){t(e.val())})},offMessage:function(){l.off("child_added")}};e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(36),o=i(s),a={format:function(t,e){var n=new Date(t),i=e,s={"M+":n.getMonth()+1,"[Dd]+":n.getDate(),"[Hh]+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};return/([Yy]+)/.test(i)&&(i=i.replace(RegExp.$1,(""+n.getFullYear()).substr(4-RegExp.$1.length))),(0,o.default)(s).forEach(function(t){new RegExp("("+t+")").test(i)&&(i=i.replace(RegExp.$1,1===RegExp.$1.length?s[t]:("00"+s[t]).substr((""+s[t]).length)))}),i}};e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),o=i(s);e.default={name:"app",components:{Login:o.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),o=i(s),a=n(76),r=i(a);n(65),e.default={data:function(){return{isShow:!1,textCenter:!1,cancelable:!0,title:"",content:"",btnText:{OK:"确认",Cancel:"取消"},promise:null,submitHandler:null}},computed:{btnClass:function(){return this.cancelable?"col-2":"col-1"}},methods:{show:function(t){var e=this;return(0,o.default)(this,t,{isShow:!0}),new r.default(function(t,n){e.promise={resolve:t,reject:n}})},cancelHandler:function(){this.isShow=!1,this.promise.reject()},okHandler:function(){var t=this;if(this.submitHandler){var e=this.submitHandler();if(e.then)return void e.then(function(){t.isShow=!1,t.promise.resolve()})}this.isShow=!1,this.promise.resolve()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(66),e.default={props:{list:[]},data:function(){return{}},components:{}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(22),o=i(s),a=n(2),r=i(a),u=n(1),l=i(u);e.default={data:function(){return{displayName:null,photoURL:null,isSubmit:!1}},components:{"dialog-component":o.default},computed:{btnDisabled:function(){return!this.displayName&&!this.photoURL||this.isSubmit}},methods:{open:function(t){return this.displayName=t.displayName,this.photoURL=t.photoURL,this.$refs.dialog.show({title:"个人信息",btnText:{OK:"提交",Cancel:"取消"},textCenter:!1,cancelable:!0})},submit:function(){var t=this;this.isSubmit=!0,l.default.updateUserInfo({displayName:this.displayName,photoURL:this.photoURL}).then(function(){r.default.toast("修改成功"),t.isSubmit=!1,t.$refs.dialog.okHandler()}).catch(function(){r.default.toast("修改失败，请重试")})},cancel:function(){this.displayName="",this.photoURL="",this.$refs.dialog.okHandler()}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(5),o=i(s),a=n(1),r=i(a),u=n(2),l=i(u),d=n(80),c=i(d),f=n(25),p=i(f),h=n(26),m=i(h),_=n(81),v=i(_);n(19),n(67),e.default={data:function(){return{content:null,user:r.default.getCurrentUser(),messageList:[]}},mounted:function(){var t=this,e=this.$refs.messages,i=e.querySelector(".message-list");e.scrollTop=i.scrollHeight,p.default.onMessage(function(s){t.messageList.push((0,o.default)({},s,{isSelf:t.user.uid===s.uid,photo:"url("+(s.photo||n(20))+")",time:m.default.format(s.time,"YYYY-MM-DD HH:mm:ss")})),i.scrollHeight-e.scrollTop<650&&t.$nextTick(function(){e.scrollTop=i.scrollHeight})})},beforeDestroy:function(){},computed:{userPhoto:function(){return"url("+(this.user.photoURL||n(20))+")"}},components:{"message-list":c.default,"user-edit":v.default},methods:{keyDownHandler:function(t){if(this.content&&!t.metaKey&&13===t.keyCode){t.preventDefault();var e=this.content.trim();e&&(this.content=null,p.default.send(e))}else t.metaKey&&13===t.keyCode&&(this.content=(this.content||"")+"\n")},editHandler:function(){this.$refs.userEditDialog.open(this.user)},signOut:function(){l.default.confirm("确认注销当前帐号？").then(r.default.signOut)}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),o=i(s);n(19),n(68),e.default={data:function(){return{user:o.default.getCurrentUser()}},components:{}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(82),o=i(s),a=n(83),r=i(a);e.default={data:function(){return{}},components:{"chat-panel":o.default,"media-panel":r.default}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),o=i(s),a=n(1),r=i(a);e.default={data:function(){return{email:null,password:null,isSubmit:!1}},components:{},methods:{submit:function(){var t=this;this.email&&this.password&&(this.isSubmit=!0,r.default.login(this.email,this.password).then(function(){o.default.toast("登录成功")}).catch(function(){o.default.toast("登录失败")}).then(function(){t.isSubmit=!1}))}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),o=i(s),a=n(2),r=i(a);e.default={data:function(){return{email:null,password:null,confirmPassword:null}},components:{},methods:{submit:function(){if(this.email&&this.password&&this.confirmPassword)return this.password!==this.confirmPassword?void r.default.info("请输入相同的密码"):void o.default.register(this.email,this.password).then(function(){r.default.toast("创建成功")}).catch(function(){r.default.toast("创建失败")})}}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,,,function(t,e,n){var i,s;n(70),i=n(27);var o=n(88);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(29);var o=n(91);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(30);var o=n(89);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(31);var o=n(94);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(32);var o=n(87);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(t,e,n){var i,s;n(71),i=n(33);var o=n(92);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,s._scopeId="data-v-38c44c6a",t.exports=i},function(t,e,n){var i,s;n(69),i=n(35);var o=n(86);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=o.render,s.staticRenderFns=o.staticRenderFns,t.exports=i},function(module,exports,__webpack_require__){module.exports={render:function(){with(this)return _h("div",{staticClass:"login-container"},[_h("div",{staticClass:"login-panel"},[_m(0)," ",_h("form",{attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault(),submit(t)}}},[_h("md-input-container",[_m(1)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:email,expression:"email"}],attrs:{type:"email"},domProps:{value:email},on:{input:function(t){email=t}}})])," ",_h("md-input-container",[_m(2)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:password,expression:"password"}],attrs:{type:"password"},domProps:{value:password},on:{input:function(t){password=t}}})])," ",_h("md-input-container",[_m(3)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:confirmPassword,expression:"confirmPassword"}],attrs:{type:"password"},domProps:{value:confirmPassword},on:{input:function(t){confirmPassword=t}}})])," ",_m(4)," ",_h("md-button",{staticClass:"md-primary btn-block",attrs:{disabled:!email||!password||!confirmPassword},on:{click:submit}},["提交注册\n      "])])])])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"login-logo"},[_h("img",{attrs:{src:__webpack_require__(21)}})])},function(){with(this)return _h("label",["邮箱"])},function(){with(this)return _h("label",["密码"])},function(){with(this)return _h("label",["确认密码"])},function(){with(this)return _h("input",{attrs:{type:"submit",style:"display: none"}})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"wrapper"},[_h("md-whiteframe",{staticClass:"wrapper-panel",attrs:{"md-elevation":"1"}})])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_h("router-view")])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("dialog-component",{ref:"dialog"},[_h("div",{slot:"body"},[_h("form",{attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault(),submit(t)}}},[_h("md-input-container",[_m(0)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:displayName,expression:"displayName"}],attrs:{type:"text",placeholder:"请输入昵称"},domProps:{value:displayName},on:{input:function(t){displayName=t}}})])," ",_h("md-input-container",[_m(1)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:photoURL,expression:"photoURL"}],attrs:{type:"text",placeholder:"请输入头像地址"},domProps:{value:photoURL},on:{input:function(t){photoURL=t}}})])," ",_m(2)])])," ",_h("div",{slot:"footer"},[_h("md-button",{staticClass:"col-2",on:{click:cancel}},["取消\n    "])," ",_h("md-button",{staticClass:"md-primary col-2",attrs:{disabled:btnDisabled},on:{click:submit}},[_s(isSubmit?"正在提交...":"提交")+"\n    "])])])},staticRenderFns:[function(){with(this)return _h("label",["昵称"])},function(){with(this)return _h("label",["头像"])},function(){with(this)return _h("input",{attrs:{type:"submit",style:"display: none"}})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("transition",{attrs:{name:"dialogAnimate"}},[_h("div",{directives:[{name:"show",rawName:"v-show",value:isShow,expression:"isShow"}],staticClass:"dialog-container"},[_h("div",{staticClass:"dialog"},[_h("div",{staticClass:"dialog-title"},[_t("header",[_s(title)])])," ",_h("div",{staticClass:"dialog-body",class:{"text-center":textCenter}},[_t("body",[_s(content)])])," ",_h("div",{staticClass:"dialog-footer"},[_t("footer",[cancelable?_h("md-button",{class:btnClass,on:{click:function(t){cancelHandler()}}},[_s(btnText.Cancel)+"\n          "]):_e()," ",_h("md-button",{staticClass:"md-primary",class:btnClass,on:{click:function(t){okHandler()}}},[_s(btnText.OK)+"\n          "])])])])])])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"message-list"},[_l(list,function(t){return _h("div",{staticClass:"message-container clearfix",class:{self:t.isSelf}},[_h("div",{staticClass:"head-photo",style:{"background-image":t.photo}})," ",_h("div",{staticClass:"message"},[_h("div",{staticClass:"title clearfix"},[_h("span",{staticClass:"name"},[_s(t.name)])," ",_m(0,!0)," ",_h("small",{staticClass:"time"},[_s(_f("formatDate")(t.time,"YY-MM-DD"))])])," ",_h("div",{staticClass:"content"},[_s(t.content)])])])})])},staticRenderFns:[function(){with(this)return _h("span",{staticClass:"splitter"},["-"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"main-panel"},[_h("div",{staticClass:"left-panel"},[_h("media-panel")])," ",_h("div",{staticClass:"right-panel"},[_h("chat-panel")])])},staticRenderFns:[]}},function(module,exports,__webpack_require__){module.exports={render:function(){with(this)return _h("div",{staticClass:"login-container"},[_h("div",{staticClass:"login-panel"},[_m(0)," ",_h("form",{attrs:{novalidate:""},on:{submit:function(t){t.stopPropagation(),t.preventDefault(),submit(t)}}},[_h("md-input-container",[_m(1)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:email,expression:"email"}],attrs:{type:"text"},domProps:{value:email},on:{input:function(t){email=t}}})])," ",_h("md-input-container",{attrs:{"md-has-password":""}},[_m(2)," ",_h("md-input",{directives:[{name:"model",rawName:"v-model",value:password,expression:"password"}],attrs:{type:"password"},domProps:{value:password},on:{input:function(t){password=t}}})])," ",_m(3)," ",_h("md-button",{staticClass:"md-primary btn-block",attrs:{disabled:!email||!password||isSubmit},on:{click:submit}},[_s(isSubmit?"正在登录...":"登录")+"\n      "])," ",_h("router-link",{attrs:{to:"/register"}},[_h("md-button",{staticClass:"md-warn btn-block"},["注册"])])])])])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"login-logo"},[_h("img",{attrs:{src:__webpack_require__(21)}})])},function(){with(this)return _h("label",["用户名"])},function(){with(this)return _h("label",["密码"])},function(){with(this)return _h("input",{attrs:{type:"submit",style:"display: none"}})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"wrapper"},[_h("md-whiteframe",{staticClass:"wrapper-panel",attrs:{"md-elevation":"1"}},[_h("div",{staticClass:"user-info"},[_h("div",{staticClass:"head-photo",style:{"background-image":userPhoto}})," ",_h("div",{staticClass:"username"},["\n        "+_s(user.displayName||"暂无昵称")+"\n        -\n        ("+_s(user.email)+")\n      "])," ",_h("a",{staticClass:"pull-left",attrs:{href:""},on:{click:function(t){t.preventDefault(),editHandler(t)}}},[_h("md-icon",["edit"])])," ",_h("a",{staticClass:"pull-right",attrs:{href:""},on:{click:function(t){t.preventDefault(),signOut(t)}}},[_h("md-icon",["power_settings_new"])])])," ",_h("div",{ref:"messages",staticClass:"message-wrapper"},[_h("message-list",{attrs:{list:messageList}})])," ",_h("div",{staticClass:"input-wrapper"},[_h("textarea",{directives:[{name:"model",rawName:"v-model",value:content,expression:"content"}],staticClass:"form-control",attrs:{placeholder:"请输入文字，按ctrl+enter发送"},domProps:{value:_s(content)},on:{keydown:keyDownHandler,input:function(t){t.target.composing||(content=t.target.value)}}})])])," ",_h("user-edit",{ref:"userEditDialog"})])},staticRenderFns:[]}},,,function(t,e){t.exports=VueRouter}]);
//# sourceMappingURL=app.52ab2f964a91050d91af.js.map